### üìë TECHNICAL TASK ‚Äî **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ `monitor` ‚Üî `bot`**

> **–¶–µ–ª—å:** —Ä–∞–∑–¥–µ–ª–∏—Ç—å UI / –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –ø—Ä–æ–¥–∞–∂ –∏ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥; –æ–±–µ—Å–ø–µ—á–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞–º–∏ –∏ –ø–µ—Ä–µ–¥–∞—á—É –æ—à–∏–±–æ–∫ –≤–≤–µ—Ä—Ö –ø–æ —Å—Ç—ç–∫—É.
---

## 1‚ÄÇ–ö–æ–Ω—Ç–µ–∫—Å—Ç—ã

| ‚Ññ   | –ó–∞–¥–∞—á–∞                                                                     | –§–∞–π–ª/–ø–∞–∫–µ—Ç            | –ü—Ä–∏—ë–º–∫–∞                                                             |
| --- | -------------------------------------------------------------------------- | --------------------- | ------------------------------------------------------------------- |
| 1.1 | –ó–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ `context.Background()` –Ω–∞ parent-ctx                          | `internal/monitor/**` | grep –ø–æ –ø—Ä–æ–µ–∫—Ç—É ‚Üí `Background()` < 3 –≤—Ö–æ–∂–¥–µ–Ω–∏–π, –≤—Å–µ —Ç–µ—Å—Ç—ã –∑–µ–ª—ë–Ω—ã–µ   |
| 1.2 | `NewMonitoringSession(parentCtx, cfg ‚Ä¶)` –¥–æ–ª–∂–µ–Ω **—É–Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å** parentCtx | `monitor/session.go`  | unit-—Ç–µ—Å—Ç: –æ—Ç–º–µ–Ω—è–µ–º parentCtx ‚Üí –≤–Ω—É—Ç—Ä. –∫–∞–Ω–∞–ª—ã/–≥–æ—Ä–æ—É—Ç–∏–Ω—ã –∑–∞–≤–µ—Ä—à–∞—é—Ç—Å—è |

---

## 2‚ÄÇAPI `monitor`

| ‚Ññ   | –ó–∞–¥–∞—á–∞                                                                                                                       | –û–ø–∏—Å–∞–Ω–∏–µ                                      | –ü—Ä–∏—ë–º–∫–∞                                                      |
| --- | ---------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------- | ------------------------------------------------------------ |
| 2.1 | –°–æ–∑–¥–∞—Ç—å —Ç–∏–ø `PriceUpdate`                                                                                                    | `{Current, Initial, Percent, Tokens float64}` | –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è                                                |
| 2.2 | –í `MonitoringSession` –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ: <br>  ‚Ä¢ `PriceUpdates <-chan PriceUpdate` <br>  ‚Ä¢ `Err <-chan error` <br>  ‚Ä¢ `Stop()` | –ø–µ—Ä–µ–Ω–æ—Å –ª–æ–≥–∏–∫–∏ UI –∑–∞ –ø—Ä–µ–¥–µ–ª—ã –ø–∞–∫–µ—Ç–∞           | –ø–∞–∫–µ—Ç `monitor` –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç `fmt`, `task`, `dex`, `model` |
| 2.3 | –£–¥–∞–ª–∏—Ç—å `InputHandler`, `displayMonitorInfo`, `onEnterPressed`, `onExitCommand` –∏–∑ `monitor`                                 | ‚Äî                                             | `go vet ./internal/monitor` –±–µ–∑ –æ—à–∏–±–æ–∫                       |

---

## 3‚ÄÇ–ü–∞–∫–µ—Ç **bot/ui**

| ‚Ññ   | –ó–∞–¥–∞—á–∞                                                                                                                              | –§–∞–π–ª     | –ü—Ä–∏—ë–º–∫–∞                                         |
| --- | ----------------------------------------------------------------------------------------------------------------------------------- | -------- | ----------------------------------------------- |
| 3.1 | –°–æ–∑–¥–∞—Ç—å `internal/bot/ui/handler.go` c CLI-–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–æ–º: <br>‚Äì –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ ‚áí publish `SellRequested` event <br>‚Äì `q` ‚áí –æ—Ç–º–µ–Ω–∞ ctx | new file | manual: –∑–∞–ø—É—Å–∫–∞–µ–º, Enter ‚Üí –æ—Ç—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ |
| 3.2 | ANSI-—Ç–∞–±–ª–∏—Ü–∞ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–∞ –≤ —Ñ—É–Ω–∫—Ü–∏—é `ui.Render(update PriceUpdate, pnl PnLResult)`                                                    | new file | –≤—ã–≤–æ–¥ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –ø—Ä–µ–∂–Ω–∏–º                       |

---

## 4‚ÄÇ–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ **bot**

| ‚Ññ   | –ó–∞–¥–∞—á–∞                                                                                                                                                                                                | –§–∞–π–ª               | –ü—Ä–∏—ë–º–∫–∞                                          |
| --- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------ | ------------------------------------------------ |
| 4.1 | –í `worker_monitor.go` (–Ω–æ–≤—ã–π): <br>  ‚Ä¢ —Å—Ç–∞—Ä—Ç `monitor.Session` <br>  ‚Ä¢ –≥–æ—Ä—É—Ç–∏–Ω–∞ `for upd := range session.PriceUpdates` ‚Üí `ui.Render(...)` <br>  ‚Ä¢ —Å–ª—É—à–∞–µ–º —Å–æ–±—ã—Ç–∏—è UI (`SellRequested` / ctx cancel). | new file           | –∏–Ω—Ç.-—Ç–µ—Å—Ç: Enter –∑–∞–ø—É—Å–∫–∞–µ—Ç `sell`, `q` –∑–∞–≤–µ—Ä—à–∞–µ—Ç |
| 4.2 | `sellFn` –∏–Ω—ä–µ–∫—Ü–∏–µ–π: `func(ctx context.Context, percent float64) error`                                                                                                                                | worker\_monitor.go | unit-—Ç–µ—Å—Ç —Å fake DEX                             |
| 4.3 | –û—à–∏–±–∫–∏ –∏–∑ `session.Err` –∏ –∏–∑ `sellFn` –ø—Ä–æ–∫–∏–¥—ã–≤–∞—Ç—å –≤ `errgroup`                                                                                                                                        | pool.go            | CI –ø–∞–¥–∞–µ—Ç –ø—Ä–∏ fake-–æ—à–∏–±–∫–µ                        |

---

## 5‚ÄÇ–ü—Ä–æ–¥–∞–∂–∞ —Ç–æ–∫–µ–Ω–æ–≤

| ‚Ññ   | –ó–∞–¥–∞—á–∞                                                                                       | –§–∞–π–ª    | –ü—Ä–∏—ë–º–∫–∞                          |
| --- | -------------------------------------------------------------------------------------------- | ------- | -------------------------------- |
| 5.1 | –í—ã–Ω–µ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –ø—Ä–æ–¥–∞–∂–∏ –≤ `internal/bot/sell.go`                                          | ‚Äî       | lint ‚úì                           |
| 5.2 | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `dex.SellPercentTokens` **–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ**: <br>`go func(){ errCh<-sellFn(...) }()` | sell.go | –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫ UI –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è |

---

## 8‚ÄÇ–ß–µ–∫-–ª–∏—Å—Ç PR
* [ ] `golangci-lint run`
* [ ] –í—Å–µ –ø—É–Ω–∫—Ç—ã TODO –≤—ã–ø–æ–ª–Ω–µ–Ω—ã

---

### üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

* –ü–∞–∫–µ—Ç **monitor** —á–∏—Å—Ç—ã–π: –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —Ü–µ–Ω—É –∏ —à–ª—ë—Ç —Å–æ–±—ã—Ç–∏—è.
* –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (–ø—Ä–æ–¥–∞–∂–∞, UI) –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ **bot**, –ª–µ–≥–∫–æ –º–µ–Ω—è—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.
* CTRL-C, `q`, –æ—à–∏–±–∫–∏ DEX –∑–∞–≤–µ—Ä—à–∞—é—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±–µ–∑ –∑–∞–≤–∏—Å–∞–Ω–∏–π; CI –Ω–∞–¥—ë–∂–µ–Ω.

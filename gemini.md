

## ğŸ¨ Ğ¤Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ UI Ğ¼Ğ°ĞºĞµÑ‚ (Ğ¾Ñ‚ Gemini + ÑƒĞ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ñ)

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸš€ Solana Bot v1.0 | ğŸ’¼ SOL...xyz | ğŸŸ¢ RPC: OK (25ms) | ğŸ’° Total PnL: +0.1234 SOL    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ“Š Positions (5) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ID   TOKEN         ENTRY (SOL)      CURRENT (SOL)   PNL (%)     PNL (SOL)     STATUS   â”‚
â”‚> 1  Dmig...pump   0.00000010       0.00000003     -70.00% ğŸ“‰   -0.0000070   Active    â”‚
â”‚  2  CAT...wEXP    0.00150000       0.00183000     +22.00% ğŸ“ˆ   +0.0330000   Active    â”‚
â”‚  3  PUMP...qR4    0.01000000       0.01050000     +5.00%  ğŸ“ˆ   +0.0050000   Selling   â”‚
â”‚  4  WIF...hat     0.02500000       0.00500000     -80.00% ğŸ“‰   -0.2000000   TP Triggerâ”‚
â”‚  5  FOO...bar     0.10000000       0.09800000     -2.00%  ğŸ“‰   -0.0020000   Sold      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ Focus: Dmig...pump (Level 3 Trader) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                        â”‚
â”‚ ğŸ“ˆ Price Trend: -70.00% ğŸ“‰    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„                           â”‚
â”‚                                                                                        â”‚
â”‚ ğŸ’° Entry: 0.00000010 SOL       â”‚ ğŸ¦ Invested: 0.01 SOL                               â”‚
â”‚ ğŸ¯ Current: 0.00000003 SOL     â”‚ ğŸ’ Value: 0.003 SOL                                 â”‚
â”‚ ğŸ”¢ Tokens: 1,000,000           â”‚ ğŸ“Š P&L: -0.007 SOL (-70.00%) ğŸ“‰                      â”‚
â”‚                                                                                        â”‚
â”‚ âš¡[S]ell Menu  ğŸ¯[T]P/SL  ğŸ“Š[M]ore  ğŸš€[1-5] Quick Sell  â°Last: 09:26:45             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ“œ Trading Logs (ğŸ”¥ WARN+ERROR) [L]Toggle [F]ilter â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸš¨ 09:26:45 [ERROR] RPC Failed to get balance DmigFW...pump â†’ Invalid param (Retry #2)â”‚
â”‚ âš ï¸  09:16:49 [WARN]  Price Alert: WIF...hat dropped -15% in 5min â†’ Consider SL      â”‚
â”‚ ğŸ’° 09:15:30 [SUCCESS] Buy Complete: PUMP...qR4 â†’ 1000 tokens @ 0.01 SOL             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—ï¸ Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° (Ğ¾Ñ‚ O3 + Ğ´Ğ¾Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ)

### 1. LogBus ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° (O3 + ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾ÑÑ‚ÑŒ Ğ¾Ñ‚ Gemini)

```go
// internal/ui/logging/log_bus.go
type LogBus struct {
    tuiCh        chan tea.Msg
    fileWriter   *os.File
    tradesWriter *csv.Writer  
    errorWriter  *os.File
    buffer       *RingBuffer
    throttler    *LogThrottler
}

type TradingLogEntry struct {
    Level       LogLevel                 `json:"level"`
    Timestamp   time.Time               `json:"ts"`
    Component   string                  `json:"component"`
    Event       string                  `json:"event"`
    TaskID      string                  `json:"task_id,omitempty"`
    TokenMint   string                  `json:"token,omitempty"`
    Amount      float64                 `json:"amount,omitempty"`
    Price       float64                 `json:"price,omitempty"`
    TxSignature string                  `json:"tx,omitempty"`
    Error       string                  `json:"error,omitempty"`
    Details     map[string]interface{}  `json:"details,omitempty"`
    Icon        string                  // Ğ”Ğ»Ñ TUI Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ
    Color       lipgloss.Color          // Ğ¦Ğ²ĞµÑ‚ Ğ´Ğ»Ñ TUI
}

// ĞŸĞµÑ€ĞµÑ…Ğ²Ğ°Ñ‚ Ğ»Ğ¾Ğ³Ğ¾Ğ² Ğ±ĞµĞ· Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²ĞºĞ¸ TUI
type tuiWriter struct {
    ch chan<- tea.Msg
}

func (w tuiWriter) Write(p []byte) (int, error) {
    select {
    case w.ch <- logMsg(p):
    default: // ĞĞµ Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€ÑƒĞµĞ¼ ĞµÑĞ»Ğ¸ ĞºĞ°Ğ½Ğ°Ğ» Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğ¹
    }
    return len(p), nil
}
```

### 2. Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğµ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ (Ğ¾Ñ‚ Gemini)

```go
// internal/logging/structured.go
type TradingLogger struct {
    *slog.Logger
    taskID      string
    correlationID string
    logBus      *LogBus
}

// ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ñ… ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹
func (tl *TradingLogger) LogBuyStart(taskID, token string, amountSol float64) {
    entry := TradingLogEntry{
        Level:     LogInfo,
        Timestamp: time.Now(),
        Component: "trade",
        Event:     "buy_start",
        TaskID:    taskID,
        TokenMint: token,
        Amount:    amountSol,
        Icon:      "ğŸŸ¢",
        Color:     lipgloss.Color("46"),
    }
    tl.logBus.Send(entry)
    
    // JSON Ğ² Ñ„Ğ°Ğ¹Ğ»
    slog.Info("Trading event",
        slog.String("event", "buy_start"),
        slog.String("task_id", taskID),
        slog.String("token", token),
        slog.Float64("amount_sol", amountSol))
}

func (tl *TradingLogger) LogError(component, event, token, error string) {
    entry := TradingLogEntry{
        Level:     LogError,
        Timestamp: time.Now(),
        Component: component,
        Event:     event,
        TokenMint: token,
        Error:     error,
        Icon:      "ğŸš¨",
        Color:     lipgloss.Color("196"),
    }
    tl.logBus.Send(entry)
}
```

### 3. Throttling Ğ´Ğ»Ñ real-time Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğ¹ (Ğ¾Ñ‚ O3)

```go
// internal/ui/throttling/price_throttler.go
type PriceThrottler struct {
    updateInterval time.Duration
    lastUpdate     time.Time
    pendingUpdate  *PriceUpdate
    outputCh       chan tea.Msg
}

func (pt *PriceThrottler) SubmitPriceUpdate(update PriceUpdate) {
    pt.pendingUpdate = &update
    
    if time.Since(pt.lastUpdate) >= pt.updateInterval {
        pt.flush()
    }
}

func (pt *PriceThrottler) flush() {
    if pt.pendingUpdate != nil {
        select {
        case pt.outputCh <- priceUpdateMsg(*pt.pendingUpdate):
            pt.lastUpdate = time.Now()
            pt.pendingUpdate = nil
        default:
        }
    }
}

// Ğ—Ğ°Ğ¿ÑƒÑĞºĞ°ĞµĞ¼ Ğ² Init()
func (m rootModel) Init() tea.Cmd {
    return tea.Batch(
        throttledPriceUpdates(150*time.Millisecond), // O3 Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ñ
        setupLogBus(),
        subscribeToEvents(),
    )
}
```

---

## ğŸ¨ UI ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ Ñ Lipgloss ÑÑ‚Ğ¸Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸ĞµĞ¹

### 1. Header Ñ Ğ¶Ğ¸Ğ²Ğ¾Ğ¹ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸ĞµĞ¹

```go
// internal/ui/components/header.go
type HeaderStyle struct {
    container    lipgloss.Style
    title        lipgloss.Style
    wallet       lipgloss.Style
    rpcGood      lipgloss.Style
    rpcBad       lipgloss.Style
    pnlPositive  lipgloss.Style
    pnlNegative  lipgloss.Style
}

func NewHeaderStyle() HeaderStyle {
    return HeaderStyle{
        container: lipgloss.NewStyle().
            Background(lipgloss.Color("63")).
            Foreground(lipgloss.Color("15")).
            Padding(0, 1).
            Width(90),
            
        title: lipgloss.NewStyle().
            Bold(true).
            Foreground(lipgloss.Color("226")), // Ğ–ĞµĞ»Ñ‚Ñ‹Ğ¹
            
        wallet: lipgloss.NewStyle().
            Foreground(lipgloss.Color("33")), // Ğ¡Ğ¸Ğ½Ğ¸Ğ¹
            
        rpcGood: lipgloss.NewStyle().
            Foreground(lipgloss.Color("46")), // Ğ—ĞµĞ»ĞµĞ½Ñ‹Ğ¹
            
        rpcBad: lipgloss.NewStyle().
            Foreground(lipgloss.Color("196")), // ĞšÑ€Ğ°ÑĞ½Ñ‹Ğ¹
            
        pnlPositive: lipgloss.NewStyle().
            Foreground(lipgloss.Color("46")).
            Bold(true),
            
        pnlNegative: lipgloss.NewStyle().
            Foreground(lipgloss.Color("196")).
            Bold(true),
    }
}

func (h *Header) Render() string {
    rpcStatus := h.style.rpcGood.Render("ğŸŸ¢ RPC: OK (25ms)")
    if h.rpcLatency > 1000 {
        rpcStatus = h.style.rpcBad.Render("ğŸ”´ RPC: SLOW (1200ms)")
    }
    
    pnlStyle := h.style.pnlPositive
    pnlIcon := "ğŸ’°"
    if h.totalPnL < 0 {
        pnlStyle = h.style.pnlNegative
        pnlIcon = "ğŸ’¸"
    }
    
    content := lipgloss.JoinHorizontal(lipgloss.Left,
        h.style.title.Render("ğŸš€ Solana Bot v1.0"),
        " | ",
        h.style.wallet.Render(fmt.Sprintf("ğŸ’¼ %s", h.walletAddr)),
        " | ",
        rpcStatus,
        " | ",
        pnlStyle.Render(fmt.Sprintf("%s Total PnL: %.4f SOL", pnlIcon, h.totalPnL)),
    )
    
    return h.style.container.Render(content)
}
```

### 2. Positions Table Ñ gaming ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ°Ğ¼Ğ¸

```go
// internal/ui/components/positions_table.go
type PositionRow struct {
    ID          int
    TokenSymbol string
    EntryPrice  float64
    CurrentPrice float64
    PnLPercent  float64
    PnLSol      float64
    Status      PositionStatus
    Icon        string // ğŸ”¥ğŸ±ğŸš€ğŸ©â­
    Level       int    // Gaming level Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğµ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ñ‚Ğ°
}

func (pt *PositionsTable) renderRow(row PositionRow, isSelected bool) string {
    // Gaming level badge
    levelBadge := fmt.Sprintf("Lv%d", row.Level)
    if row.Level >= 10 {
        levelBadge = "ğŸ†" + levelBadge
    }
    
    // PnL Ñ Ñ†Ğ²ĞµÑ‚Ğ¾Ğ¼ Ğ¸ Ğ¸ĞºĞ¾Ğ½ĞºĞ°Ğ¼Ğ¸
    pnlColor := lipgloss.Color("46") // Ğ—ĞµĞ»ĞµĞ½Ñ‹Ğ¹
    pnlIcon := "ğŸ“ˆ"
    if row.PnLPercent < 0 {
        pnlColor = lipgloss.Color("196") // ĞšÑ€Ğ°ÑĞ½Ñ‹Ğ¹  
        pnlIcon = "ğŸ“‰"
    }
    
    pnlStyle := lipgloss.NewStyle().Foreground(pnlColor).Bold(true)
    
    // Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ Ñ Ğ¸ĞºĞ¾Ğ½ĞºĞ°Ğ¼Ğ¸
    statusMap := map[PositionStatus]string{
        StatusActive:    "ğŸŸ¢ Active",
        StatusSelling:   "ğŸŸ¡ Selling", 
        StatusSold:      "âšª Sold",
        StatusTPTrigger: "ğŸ¯ TP Trigger",
        StatusError:     "ğŸ”´ Error",
    }
    
    rowStyle := pt.style.normalRow
    if isSelected {
        rowStyle = pt.style.selectedRow
    }
    
    content := fmt.Sprintf("%d  %s%s  %.8f  %.8f  %s  %s  %s",
        row.ID,
        row.Icon,
        row.TokenSymbol,
        row.EntryPrice,
        row.CurrentPrice,
        pnlStyle.Render(fmt.Sprintf("%.2f%% %s", row.PnLPercent, pnlIcon)),
        pnlStyle.Render(fmt.Sprintf("%.7f", row.PnLSol)),
        statusMap[row.Status],
    )
    
    return rowStyle.Render(content)
}
```

### 3. Focus Pane Ñ sparkline (Ğ¾Ñ‚ Gemini + gaming)

```go
// internal/ui/components/focus_pane.go
func (fp *FocusPane) Render() string {
    token := fp.selectedToken
    
    // Gaming level Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğµ PnL
    level := int(math.Max(1, math.Floor(token.PnLPercent/10)))
    levelBadge := fmt.Sprintf("(Level %d Trader)", level)
    if level >= 10 {
        levelBadge = "(ğŸ† Master Trader)"
    }
    
    title := fp.style.title.Render(fmt.Sprintf("ğŸ¯ Focus: %s %s", token.Symbol, levelBadge))
    
    // Sparkline Ğ³Ñ€Ğ°Ñ„Ğ¸Ğº (Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾Ğ¹ ASCII)
    sparkline := fp.renderSparkline(token.PriceHistory)
    
    // Price trend Ñ Ğ¿Ñ€Ğ¾Ñ†ĞµĞ½Ñ‚Ğ¾Ğ¼ Ğ¸ ÑĞ¼Ğ¾Ğ´Ğ·Ğ¸
    trendIcon := "ğŸ“ˆ"
    trendColor := lipgloss.Color("46")
    if token.PriceChange < 0 {
        trendIcon = "ğŸ“‰"
        trendColor = lipgloss.Color("196")
    }
    
    trendStyle := lipgloss.NewStyle().Foreground(trendColor).Bold(true)
    trendLine := fmt.Sprintf("ğŸ“ˆ Price Trend: %s    %s",
        trendStyle.Render(fmt.Sprintf("%.2f%% %s", token.PriceChange, trendIcon)),
        sparkline)
    
    // Ğ›ĞµĞ²Ğ°Ñ ĞºĞ¾Ğ»Ğ¾Ğ½ĞºĞ° - Ñ†ĞµĞ½Ñ‹
    leftCol := lipgloss.JoinVertical(lipgloss.Left,
        fmt.Sprintf("ğŸ’° Entry: %.8f SOL", token.EntryPrice),
        fmt.Sprintf("ğŸ¯ Current: %.8f SOL", token.CurrentPrice),
        fmt.Sprintf("ğŸ”¢ Tokens: %s", formatNumber(token.Amount)),
    )
    
    // ĞŸÑ€Ğ°Ğ²Ğ°Ñ ĞºĞ¾Ğ»Ğ¾Ğ½ĞºĞ° - Ğ¸Ğ½Ğ²ĞµÑÑ‚Ğ¸Ñ†Ğ¸Ğ¸ Ğ¸ PnL
    pnlColor := lipgloss.Color("46")
    pnlIcon := "ğŸ“Š"
    if token.PnL < 0 {
        pnlColor = lipgloss.Color("196")
        pnlIcon = "ğŸ“‰"
    }
    
    rightCol := lipgloss.JoinVertical(lipgloss.Left,
        fmt.Sprintf("ğŸ¦ Invested: %.3f SOL", token.Invested),
        fmt.Sprintf("ğŸ’ Value: %.3f SOL", token.CurrentValue),
        lipgloss.NewStyle().Foreground(pnlColor).Bold(true).Render(
            fmt.Sprintf("%s P&L: %.6f SOL (%.2f%%)", pnlIcon, token.PnL, token.PnLPercent)),
    )
    
    // Ğ“Ğ¾Ñ€ÑÑ‡Ğ¸Ğµ ĞºĞ»Ğ°Ğ²Ğ¸ÑˆĞ¸ Ñ Ğ¸ĞºĞ¾Ğ½ĞºĞ°Ğ¼Ğ¸
    hotkeys := "âš¡[S]ell Menu  ğŸ¯[T]P/SL  ğŸ“Š[M]ore  ğŸš€[1-5] Quick Sell  â°Last: " + token.LastUpdate.Format("15:04:05")
    
    content := lipgloss.JoinVertical(lipgloss.Left,
        title,
        "",
        trendLine,
        "",
        lipgloss.JoinHorizontal(lipgloss.Top,
            leftCol,
            strings.Repeat(" ", 10),
            rightCol,
        ),
        "",
        fp.style.hotkeys.Render(hotkeys),
    )
    
    return fp.style.container.Render(content)
}

func (fp *FocusPane) renderSparkline(priceHistory []float64) string {
    if len(priceHistory) < 2 {
        return "No data"
    }
    
    // ĞŸÑ€Ğ¾ÑÑ‚Ğ¾Ğ¹ ASCII sparkline
    width := 50
    height := 1
    
    min := slices.Min(priceHistory)
    max := slices.Max(priceHistory)
    if max == min {
        return strings.Repeat("â–ˆ", width)
    }
    
    var result strings.Builder
    for i := 0; i < width; i++ {
        if i < len(priceHistory) {
            normalized := (priceHistory[i] - min) / (max - min)
            if normalized > 0.75 {
                result.WriteString("â–ˆ")
            } else if normalized > 0.5 {
                result.WriteString("â–†")
            } else if normalized > 0.25 {
                result.WriteString("â–„")
            } else {
                result.WriteString("â–‚")
            }
        } else {
            result.WriteString(" ")
        }
    }
    
    return result.String()
}
```

### 4. Log Viewer Ñ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸ĞµĞ¹ Ğ¸ Ñ†Ğ²ĞµÑ‚Ğ°Ğ¼Ğ¸

```go
// internal/ui/components/log_viewer.go
type LogViewer struct {
    entries     []TradingLogEntry
    filter      LogFilter
    viewport    viewport.Model
    maxEntries  int
    style       LogViewerStyle
}

type LogFilter int
const (
    FilterErrorsOnly LogFilter = iota
    FilterWarningsAndErrors
    FilterAll
    FilterTradingOnly
)

func (lv *LogViewer) renderLogEntry(entry TradingLogEntry) string {
    // Timestamp
    timeStr := entry.Timestamp.Format("15:04:05")
    timeStyle := lipgloss.NewStyle().Foreground(lipgloss.Color("245"))
    
    // Level Ñ Ñ†Ğ²ĞµÑ‚Ğ¾Ğ¼ Ğ¸ Ğ¸ĞºĞ¾Ğ½ĞºĞ¾Ğ¹
    var levelStyle lipgloss.Style
    levelIcon := entry.Icon
    if levelIcon == "" {
        switch entry.Level {
        case LogError:
            levelIcon = "ğŸš¨"
            levelStyle = lipgloss.NewStyle().Foreground(lipgloss.Color("196")).Bold(true)
        case LogWarn:
            levelIcon = "âš ï¸"
            levelStyle = lipgloss.NewStyle().Foreground(lipgloss.Color("214"))
        case LogInfo:
            levelIcon = "â„¹ï¸"
            levelStyle = lipgloss.NewStyle().Foreground(lipgloss.Color("33"))
        case LogSuccess:
            levelIcon = "âœ…"
            levelStyle = lipgloss.NewStyle().Foreground(lipgloss.Color("46"))
        }
    } else {
        levelStyle = lipgloss.NewStyle().Foreground(entry.Color)
    }
    
    // ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚
    componentStyle := lipgloss.NewStyle().Foreground(lipgloss.Color("245"))
    
    // Token (ÑĞ¾ĞºÑ€Ğ°Ñ‰ĞµĞ½Ğ½Ñ‹Ğ¹)
    tokenStr := ""
    if entry.TokenMint != "" {
        tokenStr = entry.TokenMint[:6] + "..." + entry.TokenMint[len(entry.TokenMint)-4:]
    }
    
    // Ğ¡Ğ±Ğ¾Ñ€ĞºĞ° ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ
    message := fmt.Sprintf("%s [%s] %s",
        entry.Event,
        entry.Component,
        tokenStr)
    
    if entry.Error != "" {
        message += " â†’ " + entry.Error
    }
    
    // Ğ”ĞµÑ‚Ğ°Ğ»Ğ¸ Ğ´Ğ»Ñ Ñ‚Ğ¾Ñ€Ğ³Ğ¾Ğ²Ñ‹Ñ… Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹
    details := ""
    if entry.Amount > 0 {
        details += fmt.Sprintf(" (%.3f SOL)", entry.Amount)
    }
    if entry.Price > 0 {
        details += fmt.Sprintf(" @ %.8f", entry.Price)
    }
    
    return lipgloss.JoinHorizontal(lipgloss.Left,
        timeStyle.Render(timeStr),
        " ",
        levelIcon,
        " ",
        levelStyle.Render(message + details),
    )
}

func (lv *LogViewer) filterEntries() []TradingLogEntry {
    var filtered []TradingLogEntry
    
    for _, entry := range lv.entries {
        switch lv.filter {
        case FilterErrorsOnly:
            if entry.Level == LogError {
                filtered = append(filtered, entry)
            }
        case FilterWarningsAndErrors:
            if entry.Level == LogError || entry.Level == LogWarn {
                filtered = append(filtered, entry)
            }
        case FilterTradingOnly:
            if entry.Component == "trade" || entry.Component == "monitor" {
                filtered = append(filtered, entry)
            }
        case FilterAll:
            filtered = append(filtered, entry)
        }
    }
    
    return filtered
}
```

---

## ğŸ”„ Real-time updates Ğ¸ Event handling

### 1. Unified Event System

```go
// internal/ui/events/trading_events.go
type TradingEventMsg struct {
    Type      string
    Data      interface{}
    Timestamp time.Time
}

// ĞŸÑ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ²Ğ½ÑƒÑ‚Ñ€ĞµĞ½Ğ½Ğ¸Ñ… ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹ Ğ² TUI ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ
func (es *EventSubscriber) OnEvent(event bot.TradingEvent) {
    var msg TradingEventMsg
    
    switch e := event.(type) {
    case bot.PositionCreatedEvent:
        msg = TradingEventMsg{
            Type: "position_created",
            Data: UIPosition{
                ID:          e.TaskID,
                TokenSymbol: extractSymbol(e.TokenMint),
                EntryPrice:  e.EntryPrice,
                Amount:      float64(e.TokenBalance) / 1e6,
                Icon:        getTokenIcon(e.TokenMint),
                Level:       1, // ĞĞ°Ñ‡Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ
            },
            Timestamp: e.Timestamp,
        }
        
        // Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
        es.logger.LogBuySuccess(
            fmt.Sprintf("task_%d", e.TaskID),
            e.TokenMint,
            e.AmountSol,
            e.EntryPrice,
            e.TxSignature,
        )
        
    case monitor.PriceUpdateEvent:
        // Throttling Ñ‡ĞµÑ€ĞµĞ· O3 ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ
        es.priceThrottler.SubmitPriceUpdate(PriceUpdate{
            TokenMint:    e.TokenMint,
            CurrentPrice: e.CurrentPrice,
            Change:       e.PercentChange,
            Timestamp:    time.Now(),
        })
    }
    
    // ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ² TUI
    es.tuiProgram.Send(msg)
}
```

### 2. Model routing Ğ¸ state management

```go
// internal/ui/app.go
type AppModel struct {
    header        *Header
    positionsTable *PositionsTable
    focusPane     *FocusPane
    logViewer     *LogViewer
    
    // State
    selectedPosition int
    viewMode        ViewMode
    logFilter       LogFilter
    
    // Services
    logBus          *LogBus
    eventSubscriber *EventSubscriber
    priceThrottler  *PriceThrottler
}

func (m AppModel) Update(msg tea.Msg) (tea.Model, tea.Cmd) {
    var cmds []tea.Cmd
    
    switch msg := msg.(type) {
    case tea.KeyMsg:
        switch msg.String() {
        case "l", "L":
            // Toggle log filter
            m.logViewer.ToggleFilter()
            
        case "c", "C":
            // Toggle compact mode
            m.positionsTable.ToggleCompactMode()
            
        case "enter":
            // Full-screen focus mode
            m.viewMode = ViewModeFullScreenFocus
            
        case "1", "2", "3", "4", "5":
            // Quick sell percentages
            if m.selectedPosition >= 0 {
                percentage := map[string]float64{
                    "1": 25.0, "2": 50.0, "3": 75.0, "4": 90.0, "5": 100.0,
                }[msg.String()]
                return m, m.sendSellCommand(percentage)
            }
        }
        
    case TradingEventMsg:
        // Route trading events to appropriate components
        switch msg.Type {
        case "position_created":
            m.positionsTable.AddPosition(msg.Data.(UIPosition))
            
        case "price_update":
            update := msg.Data.(PriceUpdate)
            m.positionsTable.UpdatePrice(update)
            m.focusPane.UpdatePrice(update)
            
            // Price alerts
            if math.Abs(update.Change) > 10.0 {
                return m, m.showPriceAlert(update)
            }
        }
        
    case logMsg:
        // Parse Ğ¸ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ² log viewer
        var entry TradingLogEntry
        if json.Unmarshal([]byte(msg), &entry) == nil {
            m.logViewer.AddEntry(entry)
        }
    }
    
    // Update sub-components
    m.header, cmd := m.header.Update(msg)
    cmds = append(cmds, cmd)
    
    m.positionsTable, cmd = m.positionsTable.Update(msg)
    cmds = append(cmds, cmd)
    
    m.focusPane, cmd = m.focusPane.Update(msg)
    cmds = append(cmds, cmd)
    
    m.logViewer, cmd = m.logViewer.Update(msg)
    cmds = append(cmds, cmd)
    
    return m, tea.Batch(cmds...)
}

func (m AppModel) View() string {
    switch m.viewMode {
    case ViewModeFullScreenFocus:
        return m.renderFullScreenFocus()
    case ViewModeCompact:
        return m.renderCompactMode()
    default:
        return m.renderMainDashboard()
    }
}

func (m AppModel) renderMainDashboard() string {
    return lipgloss.JoinVertical(lipgloss.Left,
        m.header.Render(),
        m.positionsTable.Render(),
        m.focusPane.Render(),
        m.logViewer.Render(),
    )
}
```

---

## ğŸ“ Ğ¤Ğ°Ğ¹Ğ»Ğ¾Ğ²Ğ°Ñ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ»Ğ¾Ğ³Ğ¾Ğ² (Ğ¾Ñ‚ Gemini)

```
logs/
â”œâ”€â”€ bot.log              # ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ JSON Ğ»Ğ¾Ğ³ ÑĞ¾ Ğ²ÑĞµĞ¼Ğ¸ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸ÑĞ¼Ğ¸
â”œâ”€â”€ trades.csv           # CSV Ğ´Ğ»Ñ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ° Ñ‚Ğ¾Ñ€Ğ³Ğ¾Ğ²Ğ»Ğ¸
â”œâ”€â”€ errors.log           # Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ ERROR ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ
â””â”€â”€ daily/
    â”œâ”€â”€ 2024-01-15.log   # Ğ”Ğ½ĞµĞ²Ğ½Ñ‹Ğµ Ğ°Ñ€Ñ…Ğ¸Ğ²Ñ‹
    â””â”€â”€ 2024-01-16.log
```

### CSV ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ´Ğ»Ñ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ°:
```csv
timestamp,correlation_id,token,action,amount_sol,amount_tokens,entry_price,current_price,pnl_sol,pnl_percent,tx_signature,status
2024-01-15T09:17:14Z,task_buy_001,DmigFWpu6x...,buy,0.01,1000000,0.00000010,,,,3W5wGc8T...,success
2024-01-15T09:18:30Z,task_buy_001,DmigFWpu6x...,price_update,,,0.00000010,0.00000008,-0.002,-20.0,,
2024-01-15T09:25:45Z,task_buy_001,DmigFWpu6x...,sell,0.008,1000000,0.00000010,0.00000008,-0.002,-20.0,5N2kQv3F...,success
```

---

## ğŸš€ ĞŸĞ¾ÑÑ‚Ğ°Ğ¿Ğ½Ñ‹Ğ¹ Ğ¿Ğ»Ğ°Ğ½ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸

### ĞĞµĞ´ĞµĞ»Ñ 1: ĞÑĞ½Ğ¾Ğ²Ğ° Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñ‹ (O3)
1. **LogBus ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°** - Ğ¿ĞµÑ€ĞµÑ…Ğ²Ğ°Ñ‚ Ğ»Ğ¾Ğ³Ğ¾Ğ², tuiWriter, ĞºĞ°Ğ½Ğ°Ğ»Ñ‹
2. **Throttling** - PriceThrottler Ğ´Ğ»Ñ Ğ¿Ğ»Ğ°Ğ²Ğ½Ñ‹Ñ… Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğ¹
3. **Model hierarchy** - rootModel, layoutModel, component models
4. **Event routing** - TradingEventMsg, EventSubscriber

### ĞĞµĞ´ĞµĞ»Ñ 2: UI ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ (Gemini Ğ¼Ğ°ĞºĞµÑ‚)
1. **Header** - ÑÑ‚Ğ°Ñ‚ÑƒÑ Ğ±Ğ°Ñ€ Ñ RPC, wallet, PnL
2. **PositionsTable** - Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° Ñ navigation, Ğ²Ñ‹Ğ´ĞµĞ»ĞµĞ½Ğ¸ĞµĞ¼
3. **FocusPane** - Ğ´ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ¿Ğ°Ğ½ĞµĞ»ÑŒ Ñ sparkline
4. **LogViewer** - viewport Ñ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸ĞµĞ¹

### ĞĞµĞ´ĞµĞ»Ñ 3: Ğ¡Ñ‚Ğ¸Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¸ features (Claude + gaming)
1. **Lipgloss styles** - Ñ†Ğ²ĞµÑ‚Ğ¾Ğ²Ğ¾Ğµ ĞºĞ¾Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ, Ğ¸ĞºĞ¾Ğ½ĞºĞ¸, borders
2. **Gaming elements** - levels, badges, progress bars
3. **Animations** - loading spinners, transitions
4. **Hotkeys** - quick sell, mode switching, filters

### ĞĞµĞ´ĞµĞ»Ñ 4: Advanced features
1. **Full-screen modes** - ĞºĞ¾Ğ¼Ğ¿Ğ°ĞºÑ‚Ğ½Ñ‹Ğ¹ Ñ€ĞµĞ¶Ğ¸Ğ¼, focus mode
2. **Price alerts** - ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ Ğ¿Ñ€Ğ¸ Ñ€ĞµĞ·ĞºĞ¸Ñ… Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸ÑÑ…
3. **CSV export** - ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ°Ñ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ñ‚Ğ¾Ñ€Ğ³Ğ¾Ğ²
4. **Performance optimization** - throttling, memory management

## ğŸ¯ Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚

âœ… **Ğ§Ğ¸ÑÑ‚Ñ‹Ğ¹ UI** - Ğ»Ğ¾Ğ³Ğ¸ Ğ½Ğµ Ğ¼ĞµÑˆĞ°ÑÑ‚ Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¼Ñƒ Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹ÑÑƒ  
âœ… **Real-time monitoring** - Ğ¿Ğ»Ğ°Ğ²Ğ½Ñ‹Ğµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ±ĞµĞ· Ğ»Ğ°Ğ³Ğ¾Ğ²  
âœ… **Production logs** - ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ, Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€ÑƒĞµĞ¼Ñ‹Ğµ, ÑĞºÑĞ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€ÑƒĞµĞ¼Ñ‹Ğµ  
âœ… **Gaming UX** - levels, badges, Ğ¸ĞºĞ¾Ğ½ĞºĞ¸ Ğ´Ğ»Ñ engagement  
âœ… **Scalable architecture** - Ğ»ĞµĞ³ĞºĞ¾ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑÑ‚ÑŒ Ğ½Ğ¾Ğ²Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹  
âœ… **Professional look** - Ñ†Ğ²ĞµÑ‚Ğ¾Ğ²Ğ¾Ğµ ĞºĞ¾Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ, ÑĞ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½

Ğ¤Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿Ğ»Ğ°Ğ½ Ğ¾Ğ±ÑŠĞµĞ´Ğ¸Ğ½ÑĞµÑ‚ Ğ»ÑƒÑ‡ÑˆĞ¸Ğµ Ğ¸Ğ´ĞµĞ¸ Ğ²ÑĞµÑ… Ñ‚Ñ€ĞµÑ… Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ¾Ğ² Ğ´Ğ»Ñ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ production-ready TUI!
# Список задач проекта

- [ ] 1. Анализ реализации мониторинга
    - [x] Исправить ошибку мониторинга в модуле pumpfun, пересмотреть расчеты bonding curve
    - [x] Реализовать дискретный расчет PnL для Pump.fun с учетом ступенчатой структуры bonding curve
    - [ ] Улучшить дискретный расчет PnL для Pump.fun получением точных параметров из смарт-контракта:
        - Получать точный шаг инкремента цены между уровнями
        - Получать точное количество токенов на каждом уровне
        - Получать актуальные остатки токенов на каждом уровне
    - [ ] Добавить мониторинг и функцию автоматической продажи для модуля pumpswap
    - [ ] Рассмотреть возможность перемещения пакета monitor в пакет dex для лучшей организации

- [ ] 2. Интеграция WebSocket
    - Добавить WebSocket-соединения для обновления цен при мониторинге
    - Изучить возможность использования WebSocket для других модулей

- [ ] 3. Реализация Workers
    - Правильно внедрить паттерны worker в модули pumpswap и pumpfun
    - Определить оптимальное размещение функциональности worker
    - Провести анализ подходов для ускорения обработки транзакций
    - Добавить возможность отправлять транзакции при помощи JITO
    - Внедрить MeV защиту 

- [ ] 4. Бенчмаркинг и тестирование
    - Провести бенчмаркинг методов в pumpswap и pumpfun на скорость выполнения
    - Протестировать на утечки памяти и CPU

- [ ] 5. Рефакторинг кода
    - Провести рефакторинг bot/runner.go, cmd/bot/main.go, wallet/wallet.go, task/models.go
    - Проанализировать и реорганизовать структуру проекта, возможно объединение или удаление определенных директорий
    - Перепроверить код в pool.go, скорее всгео требуется рефакторинг. Проверить на расходование RPC запросов
    - Перепроверить работу с кешированием, использовать go-cache где это требуется
    - Добавить проверку баланса и обработку потенциальных ошибок, при запуске снайпинга без средств на балансе. 

- [ ] 6. Разработка CLI
    - Выполнить комплексный анализ проекта для интеграции CLI
    - Начать реализацию CLI

- [ ] 7. Анализ RPC-запросов
    - Проанализировать нагрузку от RPC-запросов
    - Пересмотреть методы, которые могут отправлять избыточное количество RPC-запросов

- [ ] 8. Улучшение логирования и документации
    - Улучшить логирование в коде, удалить ненужные и добавить важные логи
    - Добавить опцию отключения несущественных логов для предотвращения влияния на производительность
    - Добавить понятные комментарии в коде
    - Обновить README.md

## Оценка и рекомендации

1. **Приоритизация**: Сначала сфокусируйтесь на мониторинге и интеграции WebSocket, так как они напрямую влияют на функциональность торговли и эффективность RPC.

2. **Дополнительные соображения**:
    - Реализовать согласованную обработку ошибок во всех DEX-адаптерах
    - Добавить механизмы повторной отправки транзакций с экспоненциальной задержкой (частично реализовано)
    - Реализовать всестороннее моделирование транзакций перед выполнением
    - Добавить корректную оценку комиссии за транзакцию

3. **Предлагаемый подход**:
    - Начните с бенчмаркинга (#4), чтобы установить базовые показатели производительности
    - Затем исправьте функциональность мониторинга (#1), так как в ней есть известные ошибки
    - Оптимизируйте использование RPC (#7), реализуя кэширование и группировку запросов
    - Внедрите WebSockets (#2) для значительного сокращения опроса RPC
    - Затем выполните рефакторинг кода (#5) с метриками для подтверждения улучшений

4. **Особенности реализации**:
    - Для мониторинга рассмотрите реализацию общего интерфейса с DEX-специфическими имплементациями
    - Для WebSockets конечная точка Solana `ws` поддерживает подписки на аккаунты для эффективного отслеживания пулов
    - Workers следует реализовать на уровне DEX-адаптера для стандартизации конкурентных операций


## Предлагаемая Приоритезация:

### Блок 1 (Стабильность и Масштабируемость):
- [x] Рефакторинг runner.go для параллельного выполнения задач (Task 3 - workers) 
- [x] Исправление мониторинга pumpfun и реализация дискретного PnL (Task 1)
- [x] Улучшение интерфейса мониторинга (Task 8)
- [ ] Улучшение дискретного PnL с получением точных параметров из смарт-контракта (Task 1)
- [ ] Проверка баланса перед транзакцией (Task 5)
- [ ] Консолидация логгеров/метрик (Task 5/8/Review)
- [ ] Рефакторинг internal/types (Task 5/Review)
- [ ] Тестирование на утечки (Task 4)
- [ ] Анализ RPC в PoolManager (Task 5/7)

### Блок 2 (Улучшения и Фичи):
- [ ] Добавление мониторинга pumpswap (Task 1)
- [ ] Использование WebSocket для цен (Task 2)
- [ ] Реализация JITO / MeV (Task 3)
- [ ] Улучшение детализации логирования (Task 8)
- [ ] Бенчмаркинг (Task 4)

### Блок 3 (Дополнительно):
- [ ] Разработка CLI (Task 6)
- [ ] Обновление документации/комментариев (Task 8)
- [ ] Рефакторинг кэширования (если нужно, Task 5)
- [ ] WebSocket для других модулей (Task 2 - если будет четкая потребность)
